# 【Godot】場面切り替えサンプル

## バージョン情報

- Godot 4.2.2

## 準備手順

Godotで開いて、動作をテストする手順です。

- 本リポジトリーをクローンするか、CodeからDownload ZIPなどでダウンロードして、任意の場所に展開します
- Godotで、入手したフォルダーをインポートして開きます
- AssetLibを開きます

![AssetLibから、GUITをダウンロードしてインストール](./docs/images/search-gut.png)

- 検索欄にgutと入力して、GUT-Godot Unit Testing(Godot 4)をクリックします
- ダウンロードして、インストールします
- プロジェクトメニューから、プロジェクト設定を開きます
- Gutのステータスを有効にします

![Gutを有効にする](./docs/images/enable-gut.png)

- プロジェクト設定を閉じます

以上で、準備完了です。続けて、動作テストを実行します。

- エディター下部からGUTタブを開きます

![GUTタブを開く](./docs/images/open-gut.png)

- 読み込みボタンをクリックして、am1 > change_scene > testsフォルダーを開いて、test_settingsファイルをダブルクリックして読み込みます

以上で、テストの設定が完了しました。Run Allをクリックすると、自動的に機能のテストが一通り実行されます。成功したら、すべてPassになります。

![GUTのテスト成功](./docs/images/gut-result.png)

起動すれば、手動でも試せます。各シーンで、ボタンをクリックして操作してください。

## 機能

本サンプルは、次のような機能を実装したものです。

- 場面切り替えを統括するシーン
  - 自動読み込みに設定
  - 画面を隠すシーンを受け取って、管理
- 画面を隠すシーン
  - 一瞬で隠すアニメ
  - 指定の秒数で隠す
  - 隠し終えたら、シグナルを発行
  - 指定の秒数で覆いを外すアニメ
  - 多いが外れたら、シグナルを発行
- 読み込むシーンのデータ
  - あればそのまま利用するUIシーンと、読み直すステージシーンを想定
  - 読み込むシーンのデータは、リソースで用意
- 解放するシーンは自動判定

## デモ内容

- 起動は、タイトル代わりのシーンをメインシーンとして起動。起動の流れは別で実装
- ボタンでゲーム開始
- UIは読み込みっぱなしにする
- ステージ
  - ボタンでキャラを消す
  - リトライボタンで読み直す
  - タイトルボタンでタイトルへ戻る

## バージョン

- Godot Engine 4.2.2

## 準備

GUTのインストールが必要です。

1. AssetLibを選択
2. gutを検索
3. GUT-Godot Unit Testing(Godot 4)を選択して、ダウンロード＞インストール
4. プロジェクト設定を開く
5. プラグインタブを選択
6. Gutのステータスを有効にする

以上できたら、下メニューからGUTタブを選択して、Run Allでテストを実行できます。

## ドキュメント

- [シーン切り替え](docs/change-scene.md)
- [起動](docs/boot.md)

